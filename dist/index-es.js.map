{"version":3,"file":"index-es.js","sources":["../src/buildGetJSONWithFetch.js","../src/index-es.js"],"sourcesContent":["/* eslint-disable node/no-unsupported-features/es-syntax */\n\n/**\n * @callback getJSONCallback\n * @param {string|string[]} jsonURL\n * @param {SimpleJSONCallback} cb\n * @param {SimpleJSONErrback} errBack\n * @returns {Promise<JSON>}\n */\n\n/**\n * @param {PlainObject} cfg\n * @param {fetch} cfg.fetch\n * @returns {getJSONCallback}\n */\nfunction buildGetJSONWithFetch ({\n  // eslint-disable-next-line no-shadow\n  fetch = typeof window !== 'undefined' ? window.fetch : self.fetch\n} = {}) {\n  /**\n  * @callback SimpleJSONCallback\n  * @param {JSON} json\n  * @returns {void}\n  */\n\n  /**\n  * @callback SimpleJSONErrback\n  * @param {Error} err\n  * @param {string|string[]} jsonURL\n  * @returns {void}\n  */\n\n  /**\n  * @type {getJSONCallback}\n  */\n  return async function getJSON (jsonURL, cb, errBack) {\n    try {\n      if (Array.isArray(jsonURL)) {\n        const arrResult = await Promise.all(jsonURL.map((url) => {\n          return getJSON(url);\n        }));\n        if (cb) {\n          // eslint-disable-next-line node/callback-return, node/no-callback-literal, promise/prefer-await-to-callbacks\n          cb(...arrResult);\n        }\n        return arrResult;\n      }\n      const resp = await fetch(jsonURL);\n      const result = await resp.json();\n      return typeof cb === 'function'\n        // eslint-disable-next-line promise/prefer-await-to-callbacks\n        ? cb(result)\n        : result;\n    // https://github.com/bcoe/c8/issues/135\n    /* c8 ignore next */\n    } catch (e) {\n      e.message += ` (File: ${jsonURL})`;\n      if (errBack) {\n        return errBack(e, jsonURL);\n      }\n      throw e;\n    // https://github.com/bcoe/c8/issues/135\n    /* c8 ignore next */\n    }\n  /* c8 ignore next */\n  };\n}\n\nexport {buildGetJSONWithFetch};\n","/* eslint-disable node/no-unsupported-features/es-syntax */\nimport {buildGetJSONWithFetch} from './buildGetJSONWithFetch.js';\n\nconst getJSON = buildGetJSONWithFetch();\n\n/**\n * For polymorphism with Node.\n * @returns {getJSON}\n */\nconst buildGetJSON = () => {\n  return getJSON;\n};\n\nexport {getJSON, buildGetJSON};\n"],"names":["value","then","direct","Promise","resolve","body","result","recover","e","buildGetJSONWithFetch","fetch","window","self","getJSON","jsonURL","cb","errBack","Array","isArray","all","map","url","arrResult","resp","json","message","buildGetJSON"],"mappings":"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"}