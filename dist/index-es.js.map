{"version":3,"file":"index-es.js","sources":["../src/buildGetJSONWithFetch.js","../src/index.js"],"sourcesContent":["/* eslint-disable node/no-unsupported-features/es-syntax */\n\n/**\n * @callback getJSONCallback\n * @param {string|string[]} jsonURL\n * @param {SimpleJSONCallback} cb\n * @param {SimpleJSONErrback} errBack\n * @returns {Promise<JSON>}\n */\n\n/**\n * @param {PlainObject} cfg\n * @param {fetch} cfg.fetch\n * @returns {getJSONCallback}\n */\nfunction buildGetJSONWithFetch ({\n  // eslint-disable-next-line no-shadow\n  fetch = window?.fetch\n} = {}) {\n  /**\n  * @callback SimpleJSONCallback\n  * @param {JSON} json\n  * @returns {void}\n  */\n\n  /**\n  * @callback SimpleJSONErrback\n  * @param {Error} err\n  * @param {string|string[]} jsonURL\n  * @returns {void}\n  */\n\n  /**\n  * @type {getJSONCallback}\n  */\n  return async function getJSON (jsonURL, cb, errBack) {\n    try {\n      if (Array.isArray(jsonURL)) {\n        const arrResult = await Promise.all(jsonURL.map((url) => getJSON(url)));\n        if (cb) {\n          // eslint-disable-next-line node/callback-return, standard/no-callback-literal, promise/prefer-await-to-callbacks\n          cb(...arrResult);\n        }\n        return arrResult;\n      }\n      const result = await fetch(jsonURL).then((r) => r.json());\n      // eslint-disable-next-line promise/prefer-await-to-callbacks\n      return typeof cb === 'function' ? cb(result) : result;\n    } catch (e) {\n      e.message += ` (File: ${jsonURL})`;\n      if (errBack) {\n        return errBack(e, jsonURL);\n      }\n      throw e;\n    }\n  };\n}\n\nexport {buildGetJSONWithFetch};\n","/* eslint-disable node/no-unsupported-features/es-syntax */\nimport {buildGetJSONWithFetch} from './buildGetJSONWithFetch.js';\n\nconst getJSON = buildGetJSONWithFetch();\n\n/**\n * For polymorphism with Node.\n * @returns {getJSON}\n */\nconst buildGetJSON = () => {\n  return getJSON;\n};\n\nexport {getJSON, buildGetJSON};\n"],"names":["value","then","direct","Promise","resolve","body","result","recover","e","buildGetJSONWithFetch","fetch","window","getJSON","jsonURL","cb","errBack","Array","isArray","all","map","url","arrResult","r","json","message","buildGetJSON"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;;;;;;;AAQA;;;;;AA0EO,gBAAgBA,KAAhB,EAAuBC,IAAvB,EAA6BC,MAA7B,EAAqC;AAC3C,MAAIA,MAAJ,EAAY;AACX,WAAOD,IAAI,GAAGA,IAAI,CAACD,KAAD,CAAP,GAAiBA,KAA5B;AACA;;AACD,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACC,IAArB,EAA2B;AAC1BD,IAAAA,KAAK,GAAGG,OAAO,CAACC,OAAR,CAAgBJ,KAAhB,CAAR;AACA;;AACD,SAAOC,IAAI,GAAGD,KAAK,CAACC,IAAN,CAAWA,IAAX,CAAH,GAAsBD,KAAjC;AACA;;AAqcM,iBAAiBK,IAAjB,EAAuBJ,IAAvB,EAA6B;AACnC,MAAIK,MAAM,GAAGD,IAAI,EAAjB;;AACA,MAAIC,MAAM,IAAIA,MAAM,CAACL,IAArB,EAA2B;AAC1B,WAAOK,MAAM,CAACL,IAAP,CAAYA,IAAZ,CAAP;AACA;;AACD,SAAOA,IAAI,CAACK,MAAD,CAAX;AACA;;AAWM,gBAAgBD,IAAhB,EAAsBE,OAAtB,EAA+B;AACrC,MAAI;AACH,QAAID,MAAM,GAAGD,IAAI,EAAjB;AACA,GAFD,CAEE,OAAMG,CAAN,EAAS;AACV,WAAOD,OAAO,CAACC,CAAD,CAAd;AACA;;AACD,MAAIF,MAAM,IAAIA,MAAM,CAACL,IAArB,EAA2B;AAC1B,WAAOK,MAAM,CAACL,IAAP,CAAY,KAAK,CAAjB,EAAoBM,OAApB,CAAP;AACA;;AACD,SAAOD,MAAP;AACA;;AA7iBD,SAASG,qBAAT,GAGQ;AAAA;;AAAA,iFAAJ,EAAI;AAAA,wBADNC,KACM;AAAA,MADNA,KACM,sCADEC,MACF,4CADE,QAAQD,KACV;;AACN;;;;;;AAMA;;;;;;;AAOA;;;AAGA,kBAAsBE,OAAtB,CAA+BC,OAA/B,EAAwCC,EAAxC,EAA4CC,OAA5C;AAAA,QAAqD;AAAA;AAAA,gCAC/C;AAAA;AAAA,cACEC,KAAK,CAACC,OAAN,CAAcJ,OAAd,CADF;AAAA,0BAEwBV,OAAO,CAACe,GAAR,CAAYL,OAAO,CAACM,GAAR,CAAY,UAACC,GAAD;AAAA,qBAASR,OAAO,CAACQ,GAAD,CAAhB;AAAA,aAAZ,CAAZ,CAFxB,YAEMC,SAFN;AAGA,kBAAIP,EAAJ,EAAQ;AACN;AACAA,gBAAAA,EAAE,MAAF,4BAAMO,SAAN;AACD;;AAND;AAAA,qBAOOA,SAPP;AAAA;AAAA;AAAA;AAAA,2CASmBX,KAAK,CAACG,OAAD,CAAL,CAAeZ,IAAf,CAAoB,UAACqB,CAAD;AAAA,mBAAOA,CAAC,CAACC,IAAF,EAAP;AAAA,WAApB,CATnB,YASIjB,MATJ;AAUF;AACA,mBAAO,OAAOQ,EAAP,KAAc,UAAd,GAA2BA,EAAE,CAACR,MAAD,CAA7B,GAAwCA,MAA/C;AAXE;AAAA;AAYH,OAbkD,YAa1CE,CAb0C,EAavC;AACVA,QAAAA,CAAC,CAACgB,OAAF,sBAAwBX,OAAxB;;AACA,YAAIE,OAAJ,EAAa;AACX,iBAAOA,OAAO,CAACP,CAAD,EAAIK,OAAJ,CAAd;AACD;;AACD,cAAML,CAAN;AACD,OAnBkD;AAoBpD,KApBD;AAAA;AAAA;AAAA;AAqBD;;ACxDD;IAGMI,OAAO,GAAGH,qBAAqB;AAErC;;;;;IAIMgB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,SAAOb,OAAP;AACD;;;;"}